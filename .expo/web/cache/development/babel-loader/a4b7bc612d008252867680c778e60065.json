{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar apiPrefix = 'https://api.spotify.com/v1';\nexport default (function _callee(_ref) {\n  var offset, limit, q, token, uri, res, json, items;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          offset = _ref.offset, limit = _ref.limit, q = _ref.q, token = _ref.token;\n          uri = apiPrefix + \"/search?type=track&limit=\" + limit + \"&offset=\" + offset + \"&q=\" + encodeURIComponent(q);\n          console.log('search begin, uri =', uri, 'token =', token);\n          _context.next = 5;\n          return _regeneratorRuntime.awrap(fetch(uri, {\n            method: 'GET',\n            headers: {\n              Authorization: \"Bearer \" + token\n            }\n          }));\n\n        case 5:\n          res = _context.sent;\n          _context.next = 8;\n          return _regeneratorRuntime.awrap(res.json());\n\n        case 8:\n          json = _context.sent;\n          console.log('search got json', json);\n\n          if (res.ok) {\n            _context.next = 12;\n            break;\n          }\n\n          return _context.abrupt(\"return\", []);\n\n        case 12:\n          items = json.tracks.items;\n          return _context.abrupt(\"return\", items.map(function (item) {\n            return {\n              id: item.id,\n              title: item.name,\n              imageUri: item.album.images ? item.album.images[0].url : undefined\n            };\n          }));\n\n        case 15:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n});","map":{"version":3,"sources":["C:/Users/WELCOME/Desktop/MusicAPP/src/api/search.js"],"names":["apiPrefix","offset","limit","q","token","uri","encodeURIComponent","console","log","fetch","method","headers","Authorization","res","json","ok","items","tracks","map","item","id","title","name","imageUri","album","images","url","undefined"],"mappings":";AAAA,IAAMA,SAAS,GAAG,4BAAlB;AAEA,gBAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AACbC,UAAAA,MADa,QACbA,MADa,EAEbC,KAFa,QAEbA,KAFa,EAGbC,CAHa,QAGbA,CAHa,EAIbC,KAJa,QAIbA,KAJa;AAMPC,UAAAA,GANO,GAMEL,SANF,iCAMuCE,KANvC,gBAMuDD,MANvD,WAMmEK,kBAAkB,CAACH,CAAD,CANrF;AAObI,UAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmCH,GAAnC,EAAwC,SAAxC,EAAmDD,KAAnD;AAPa;AAAA,2CAQKK,KAAK,CAACJ,GAAD,EAAM;AAC3BK,YAAAA,MAAM,EAAE,KADmB;AAE3BC,YAAAA,OAAO,EAAE;AACPC,cAAAA,aAAa,cAAYR;AADlB;AAFkB,WAAN,CARV;;AAAA;AAQPS,UAAAA,GARO;AAAA;AAAA,2CAcMA,GAAG,CAACC,IAAJ,EAdN;;AAAA;AAcPA,UAAAA,IAdO;AAebP,UAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BM,IAA/B;;AAfa,cAiBRD,GAAG,CAACE,EAjBI;AAAA;AAAA;AAAA;;AAAA,2CAkBJ,EAlBI;;AAAA;AAuBTC,UAAAA,KAvBS,GAyBTF,IAzBS,CAsBXG,MAtBW,CAuBTD,KAvBS;AAAA,2CA2BNA,KAAK,CAACE,GAAN,CAAU,UAAAC,IAAI;AAAA,mBAAK;AACxBC,cAAAA,EAAE,EAAED,IAAI,CAACC,EADe;AAExBC,cAAAA,KAAK,EAAEF,IAAI,CAACG,IAFY;AAGxBC,cAAAA,QAAQ,EAAEJ,IAAI,CAACK,KAAL,CAAWC,MAAX,GACNN,IAAI,CAACK,KAAL,CAAWC,MAAX,CAAkB,CAAlB,EAAqBC,GADf,GAENC;AALoB,aAAL;AAAA,WAAd,CA3BM;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAf","sourcesContent":["const apiPrefix = 'https://api.spotify.com/v1';\r\n\r\nexport default async ({\r\n  offset,\r\n  limit,\r\n  q,\r\n  token,\r\n}) => {\r\n  const uri = `${apiPrefix}/search?type=track&limit=${limit}&offset=${offset}&q=${encodeURIComponent(q)}`;\r\n  console.log('search begin, uri =', uri, 'token =', token);\r\n  const res = await fetch(uri, {\r\n    method: 'GET',\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    }\r\n  });\r\n  const json = await res.json();\r\n  console.log('search got json', json);\r\n\r\n  if (!res.ok) {\r\n    return [];\r\n  }\r\n\r\n  const {\r\n    tracks: {\r\n      items,\r\n    }\r\n  } = json;\r\n  // const items = json.tracks.items;\r\n  return items.map(item => ({\r\n    id: item.id,\r\n    title: item.name,\r\n    imageUri: item.album.images\r\n      ? item.album.images[0].url\r\n      : undefined\r\n  }));\r\n  console.log('search end');\r\n};\r\n"]},"metadata":{},"sourceType":"module"}